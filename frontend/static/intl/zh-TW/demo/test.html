<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="/css/pack/vendor.min.css"><div class="w-1024 rwd mx-auto"><br><div class="nav nav-pills mb-2"><div class="nav-item" ld-each="item"><div class="nav-link" ld="name"></div></div><div class="flex-grow-1 no-select"></div><div class="nav-item"><div class="nav-link" ld="item-add">add</div></div></div><div class="card"><div class="card-body"><h3>hi</h3></div></div></div></head><body><script type="text/javascript" src="/js/pack/vendor.min.js"></script><script type="text/javascript" src="/assets/lib/ldview/ldview.min.js"></script><script>var items, view;
items = [0, 1, 2, 3, 4, 5].map(function(it){
  return {
    key: it,
    active: it === 0
  };
});
view = new ldView({
  root: document.body,
  action: {
    click: {
      "item-add": function(arg$){
        var node, evt, key;
        node = arg$.node, evt = arg$.evt;
        key = items.length;
        items.splice(items.length, 0, {
          key: key
        });
        return view.render({
          name: 'item',
          key: key
        });
      }
    }
  },
  handler: {
    item: {
      key: function(it){
        return it.key;
      },
      list: function(){
        return items;
      },
      action: {
        click: function(arg$){
          var data;
          data = arg$.data;
          return items.map(function(it){
            it.active = data.key === it.key;
            return view.render('item');
          });
        }
      },
      view: {
        initRender: false,
        handler: {
          name: function(arg$){
            var node, context;
            node = arg$.node, context = arg$.context;
            node.innerText = "Item " + context.key + "!";
            return node.classList.toggle('active', !!context.active);
          }
        }
      }
    }
  }
});</script></body></html>