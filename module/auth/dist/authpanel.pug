//- module
mixin authpanel
  - const sub = {}
  mixin info
    - sub.info = block
  mixin credit
    - sub.credit = block
  - block()

  .w-640.mx-auto.rwd
    .iner.card.p-0.border-0.authpanel.signup: .card-body.p-0 
      .closebtn(data-ldcv-set="")
      .vertical-center.p-4.info.position-absolute.h-100.w-50.text-light
        .position-absolute.w-100.h-100.bg-semi-dark(style="top:0;left:0")
        .text-left.position-relative.z-float.text-shadow
          if sub.info
            - sub.info()
          div(ld="info",data-name="default")
            h3.mb-3.font-weight-bold(style="line-height:1em") 登入系統
            p #[b 電子郵件]即為您的帳號。若您代表您的團隊註冊，建議您使用一個#[b 團隊可共用]的電子郵件。
            p 登入之後即可進行提案、系統管理或評選工作。
          .d-none(ld="info",data-name="signup-failed")
            h2.mb-4.font-weight-bold 註冊失敗。
            p 您可能先前已經註冊過了，或者您所填的資訊有問題。您可以試著：
            ul
              li 切換至登入模式後再試一次
              li 試著使用更複雜的密碼
              li 嘗試使用社群帳號登入
              li #[a(href="#",onclick="lda.ldcvmgr.toggle('contact');",style="color:#0ff") 與我們聯絡]
          .d-none(ld="info",data-name="login-failed")
            h2.mb-4.font-weight-bold 登入失敗。
            p 您之前可能用的是別組帳號或密碼、使用不同的登入方式、甚至尚未註冊過。您可以試著：
            ul
              li 換一組帳號、密碼或登入方式
              li 確認您的 email 或密碼沒有打錯
              li 切換至註冊模式後再試一次
              li #[a(href="/dash/auth/reset/",style="color:#0ff",target="_blank",rel="noopener noreferrer") 重設密碼]
              li #[a(href="#",onclick="lda.ldcvmgr.toggle('contact');",style="color:#0ff") 與我們聯絡]
          .d-none(ld="info",data-name="token")
            h2.mb-4.font-weight-bold 歡迎您！
            p 您受邀成為我們的一員。不過，在繼續之前您需要先登入系統。

        .position-absolute.text-sm(style="bottom:20px;right:20px")
          if sub.credit
            - sub.credit()
          else
            span Powered by #[span(pd="teamname") Servebase]
            img.ml-1(src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+CjxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSI3LjQyMTEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTU5LjIsNTEuNmMtMS4zLTctNS4yLTEzLjEtMTEtMTcuMmw5LTE1LjUKYzAuOS0xLjUsMS4xLTMuNCwwLjYtNS4xYy0wLjUtMS43LTEuOC0zLjEtMy40LTMuOWMtNS42LTIuNy0xMS43LTQuMy0xNy45LTQuOEMzNC44LDUsMzMsNS42LDMxLjYsNi44Yy0xLjMsMS4yLTIuMSwyLjktMi4xLDQuN3YyIGMtNS4yLDAuMy0xMC4zLDEuNi0xNS4xLDMuN2gwYy0xLjYsMC43LTIuOSwyLjEtMy40LDMuOGMtMC42LDEuNy0wLjQsMy42LDAuNiw1LjJsNC43LDguMmMtNS44LDQuMS05LjcsMTAuMi0xMSwxNy4yIGMtMC4zLDEuOSwwLjIsMy44LDEuNCw1LjJjMS4yLDEuNSwzLDIuMyw1LDIuM2gyMC41aDBoMjAuNWMxLjksMCwzLjctMC44LDUtMi4zQzU5LDU1LjMsNTkuNSw1My40LDU5LjIsNTEuNnoiLz4gPHBhdGggZmlsbD0iIzdCQzRFMiIgZD0iTTEwLjcsNTIuNWMtMC4xLDAuNCwwLjEsMC43LDAuMiwwLjhjMC4xLDAuMSwwLjQsMC40LDAuOCwwLjRoMTUuOUwxOSwzOUMxNC43LDQyLjMsMTEuNyw0Ny4xLDEwLjcsNTIuNXoiIC8+IDxwYXRoIGZpbGw9IiNGQkIwNUIiIGQ9Ik01Mi44LDUzLjdjMC40LDAsMC43LTAuMiwwLjgtMC40YzAuMS0wLjEsMC4zLTAuNCwwLjItMC44Yy0xLTUuNC00LTEwLjItOC40LTEzLjVsLTguNSwxNC43SDUyLjh6Ii8+IDxwYXRoIGZpbGw9IiNFRDZDQTQiIGQ9Ik0zNSwyOS40YzMsMC4zLDUuOCwxLjEsOC41LDIuM2w5LTE1LjVjMC4yLTAuMywwLjEtMC43LDAuMS0wLjhjLTAuMS0wLjItMC4yLTAuNS0wLjUtMC42IGMtNS0yLjQtMTAuNC0zLjgtMTYtNC4zYzAsMC0wLjEsMC0wLjEsMGMtMC4zLDAtMC42LDAuMi0wLjcsMC4zYy0wLjEsMC4xLTAuMywwLjQtMC4zLDAuOHY0LjZjMCwwLDAsMCwwLDBWMjkuNHoiLz4gPHBhdGggZmlsbD0iI0FDRDM3MiIgZD0iTTI5LjYsMTguOWMtNC41LDAuMy04LjgsMS40LTEyLjksMy4yYy0wLjMsMC4yLTAuNSwwLjQtMC41LDAuNmMtMC4xLDAuMi0wLjEsMC41LDAuMSwwLjhsNC43LDguMiBjMi43LTEuMiw1LjYtMiw4LjUtMi4zVjE4Ljl6Ii8+IDxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zNSwzNC44TDM1LDM0LjhjLTAuOS0wLjEtMS44LTAuMi0yLjctMC4yaDBjLTAuOSwwLTEuOCwwLjEtMi43LDAuMmwwLDBjLTIsMC4yLTQsMC43LTUuOCwxLjVsNS44LDEwdjAgbDIuNyw0LjdsMCwwbDAsMGwyLjctNC43djBsNS44LTEwQzM4LjksMzUuNiwzNywzNS4xLDM1LDM0Ljh6Ii8+IDxwYXRoIGQ9Ik01OS4yLDUxLjZjLTEuMy03LTUuMi0xMy4xLTExLTE3LjJsOS0xNS41YzAuOS0xLjUsMS4xLTMuNCwwLjYtNS4xYy0wLjUtMS43LTEuOC0zLjEtMy40LTMuOWMtNS42LTIuNy0xMS43LTQuMy0xNy45LTQuOCBDMzQuOCw1LDMzLDUuNiwzMS42LDYuOGMtMS4zLDEuMi0yLjEsMi45LTIuMSw0Ljd2MmMtNS4yLDAuMy0xMC4zLDEuNi0xNS4xLDMuN2gwYy0xLjYsMC43LTIuOSwyLjEtMy40LDMuOCBjLTAuNiwxLjctMC40LDMuNiwwLjYsNS4ybDQuNyw4LjJjLTUuOCw0LjEtOS43LDEwLjItMTEsMTcuMmMtMC4zLDEuOSwwLjIsMy44LDEuNCw1LjJjMS4yLDEuNSwzLDIuMyw1LDIuM2gyMC41aDBoMjAuNSBjMS45LDAsMy43LTAuOCw1LTIuM0M1OSw1NS4zLDU5LjUsNTMuNCw1OS4yLDUxLjZ6IE01My42LDUzLjNjLTAuMSwwLjEtMC40LDAuNC0wLjgsMC40SDM2LjlMNDUuNSwzOWM0LjQsMy4zLDcuNCw4LjEsOC40LDEzLjUgQzUzLjksNTIuOSw1My43LDUzLjIsNTMuNiw1My4zeiBNMTAuOSw1My4zYy0wLjEtMC4xLTAuMy0wLjQtMC4yLTAuOGMxLTUuNCw0LTEwLjIsOC40LTEzLjVsOC41LDE0LjdIMTEuNyBDMTEuMyw1My43LDExLDUzLjUsMTAuOSw1My4zeiBNMTYuMiwyMi43YzAuMS0wLjIsMC4yLTAuNCwwLjUtMC42YzQuMS0xLjgsOC40LTIuOSwxMi45LTMuMnYxMC42Yy0zLDAuMy01LjgsMS4xLTguNSwyLjNsLTQuNy04LjIgQzE2LjEsMjMuMiwxNi4xLDIyLjgsMTYuMiwyMi43eiBNNTIuNiwxNS4zYzAuMSwwLjIsMC4xLDAuNS0wLjEsMC44bC05LDE1LjVjLTIuNy0xLjItNS42LTItOC41LTIuM1YxNi4xYzAsMCwwLDAsMCwwdi00LjYgYzAtMC40LDAuMi0wLjYsMC4zLTAuOGMwLjEtMC4xLDAuNC0wLjMsMC43LTAuM2MwLDAsMC4xLDAsMC4xLDBjNS42LDAuNSwxMSwxLjksMTYsNC4zQzUyLjQsMTQuOSw1Mi42LDE1LjIsNTIuNiwxNS4zeiBNMzIuMywzNC43IGMwLjksMCwxLjgsMC4xLDIuNywwLjJsMCwwYzIsMC4yLDQsMC43LDUuOCwxLjVsLTUuOCwxMHYwTDMyLjMsNTFsMCwwbDAsMGwtMi43LTQuN3YwbC01LjgtMTBjMS45LTAuOCwzLjgtMS4zLDUuOC0xLjVsMCwwIEMzMC41LDM0LjcsMzEuNCwzNC43LDMyLjMsMzQuN0wzMi4zLDM0Ljd6Ii8+IDwvc3ZnPgo=",style="height:1.3em;vertical-align:-.2em")

      form.form.d-flex.flex-column(ld="form")
        ul.nav.nav-tabs.pt-2.bg-light
          li.nav-item.ml-2: a.nav-link(ld="tab",data-name="signup") 註冊
          li.nav-item: a.nav-link(ld="tab",data-name="login") 登入

        .px-3.pb-4.pt-3.text-left.d-flex.flex-column.h-100
          .flex-grow-1: .vertical-center: .w-100
            .form-group
              label 電子郵件
              input.form-control.form-control-sm(name="username",
              placeholder="電子郵件即您的帳號名稱",autocomplete="username")
              .invalid-feedback(style="margin-bottom:-.75em") 無效的電子郵件
            .form-group(ld="show",data-tab="signup")
              label 顯示名稱
              input.form-control.form-control-sm(name="displayname",
              placeholder="例如：王小明",autocomplete="displayname")
              .invalid-feedback 不能留白
            .form-group
              label 密碼
              input.form-control.form-control-sm(name="password",
              placeholder="密碼，至少八個字元",type="password",autocomplete="password")
              .invalid-feedback(style="margin-bottom:-.75em") 不合格的密碼
            .form-group
              .text-center.form-text.text-muted.small
                | 登入即表示您同意我們的 #[a(href="/sys/tos/",target="_blank",rel="noopener noreferrer") 用戶條款] 與 #[a(href="/sys/privacy/",target="_blank") 隱私權政策]
            .btn.btn-success.btn-block.disabled.ld-ext-right(ld="submit")
              .d-none(ld="show",data-tab="login") 登入
              div(ld="show",data-tab="signup") 註冊
              .ld.ldld.bare.em-1
            .d-flex.justify-content-between.mt-1
              .small
              .small: a(ld="forgot-password",href="#") 忘記密碼？»

          div
            .sep.sep-text.my-4: span.text-sm 或者用下列登入
            .row
              .col: .btn.btn-primary.btn-block.btn-sm(onclick="lda.auth.fb()") #[i.i-fb] Facebook
              .col: .btn.btn-outline-dark.btn-block.btn-sm(onclick="lda.auth.google()") #[i.i-google] Google

