<div><div class="ldcv" data-name="consent"><div class="base"><div class="inner"></div></div></div><div class="ldcv" data-name="authpanel"><div class="base"><div class="inner"><form class="w-100 h-100 d-flex align-items-center justify-content-center"><div class="auth-base d-flex shadow sm rounded border mx-auto"><div class="auth-info mx-auto flex-grow-1 bg-light"><div class="w-100 h-100 position-relative d-flex flex-column p-4"><div class="flex-grow-1 align-items-center d-flex"><div class="ld ld-float-rtl-in" ld="info" data-name="default"><h3 class="mb-3 font-weight-bold" style="line-height:1em">登入服務</h3><p><b>電子郵件</b>即為您的帳號。若您代表您的團隊註冊，建議您使用一個<b>團隊可共用</b>的電子郵件。</p><p>登入之後即可進行各種需要帳號才能使用的操作。</p></div><div class="d-none ld ld-float-rtl-in" ld="info" data-name="signup-failed"><h2 class="mb-4 font-weight-bold">註冊失敗。</h2><p>您可能先前已經註冊過了，或者您所填的資訊有問題。您可以試著：</p><ul><li>切換至登入模式後再試一次</li><li>試著使用更複雜的密碼</li><li>嘗試使用社群帳號登入</li><li><a href="#" onclick="lda.ldcvmgr.toggle('contact');">與我們聯絡</a></li></ul></div><div class="d-none ld ld-float-rtl-in" ld="info" data-name="login-failed"><h2 class="mb-4 font-weight-bold">登入失敗。</h2><p>您之前可能用的是別組帳號或密碼、使用不同的登入方式、甚至尚未註冊過。您可以試著：</p><ul><li>換一組帳號、密碼或登入方式</li><li>確認您的 email 或密碼沒有打錯</li><li>切換至註冊模式後再試一次</li><li><a href="/dash/auth/reset/" target="_blank" rel="noopener noreferrer">重設密碼</a></li><li><a href="#" onclick="lda.ldcvmgr.toggle('contact');">與我們聯絡</a></li></ul></div><div class="d-none ld ld-float-rtl-in" ld="info" data-name="login-exceeded"><h2 class="mb-4 font-weight-bold">登入失敗。</h2><p>您先前已在其它裝置登入，而登入數量已超過我們的限制，因此您無法在此裝置登入。您可以先登出其它的裝置，然後再試一次。</p><p>若您需要其它任何的協助，亦可<a href="#" onclick="lda.ldcvmgr.toggle('contact');">與我們聯絡</a></p></div><div class="d-none ld ld-float-rtl-in" ld="info" data-name="token"><h2 class="mb-4 font-weight-bold">歡迎您！</h2><p>您受邀成為我們的一員。不過，在繼續之前您需要先登入系統。</p></div></div><div class="d-flex justify-content-end"><span>service powered by PlotDB Ltd.</span><img class="ml-1" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+CjxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSI3LjQyMTEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTU5LjIsNTEuNmMtMS4zLTctNS4yLTEzLjEtMTEtMTcuMmw5LTE1LjUKYzAuOS0xLjUsMS4xLTMuNCwwLjYtNS4xYy0wLjUtMS43LTEuOC0zLjEtMy40LTMuOWMtNS42LTIuNy0xMS43LTQuMy0xNy45LTQuOEMzNC44LDUsMzMsNS42LDMxLjYsNi44Yy0xLjMsMS4yLTIuMSwyLjktMi4xLDQuN3YyIGMtNS4yLDAuMy0xMC4zLDEuNi0xNS4xLDMuN2gwYy0xLjYsMC43LTIuOSwyLjEtMy40LDMuOGMtMC42LDEuNy0wLjQsMy42LDAuNiw1LjJsNC43LDguMmMtNS44LDQuMS05LjcsMTAuMi0xMSwxNy4yIGMtMC4zLDEuOSwwLjIsMy44LDEuNCw1LjJjMS4yLDEuNSwzLDIuMyw1LDIuM2gyMC41aDBoMjAuNWMxLjksMCwzLjctMC44LDUtMi4zQzU5LDU1LjMsNTkuNSw1My40LDU5LjIsNTEuNnoiLz4gPHBhdGggZmlsbD0iIzdCQzRFMiIgZD0iTTEwLjcsNTIuNWMtMC4xLDAuNCwwLjEsMC43LDAuMiwwLjhjMC4xLDAuMSwwLjQsMC40LDAuOCwwLjRoMTUuOUwxOSwzOUMxNC43LDQyLjMsMTEuNyw0Ny4xLDEwLjcsNTIuNXoiIC8+IDxwYXRoIGZpbGw9IiNGQkIwNUIiIGQ9Ik01Mi44LDUzLjdjMC40LDAsMC43LTAuMiwwLjgtMC40YzAuMS0wLjEsMC4zLTAuNCwwLjItMC44Yy0xLTUuNC00LTEwLjItOC40LTEzLjVsLTguNSwxNC43SDUyLjh6Ii8+IDxwYXRoIGZpbGw9IiNFRDZDQTQiIGQ9Ik0zNSwyOS40YzMsMC4zLDUuOCwxLjEsOC41LDIuM2w5LTE1LjVjMC4yLTAuMywwLjEtMC43LDAuMS0wLjhjLTAuMS0wLjItMC4yLTAuNS0wLjUtMC42IGMtNS0yLjQtMTAuNC0zLjgtMTYtNC4zYzAsMC0wLjEsMC0wLjEsMGMtMC4zLDAtMC42LDAuMi0wLjcsMC4zYy0wLjEsMC4xLTAuMywwLjQtMC4zLDAuOHY0LjZjMCwwLDAsMCwwLDBWMjkuNHoiLz4gPHBhdGggZmlsbD0iI0FDRDM3MiIgZD0iTTI5LjYsMTguOWMtNC41LDAuMy04LjgsMS40LTEyLjksMy4yYy0wLjMsMC4yLTAuNSwwLjQtMC41LDAuNmMtMC4xLDAuMi0wLjEsMC41LDAuMSwwLjhsNC43LDguMiBjMi43LTEuMiw1LjYtMiw4LjUtMi4zVjE4Ljl6Ii8+IDxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zNSwzNC44TDM1LDM0LjhjLTAuOS0wLjEtMS44LTAuMi0yLjctMC4yaDBjLTAuOSwwLTEuOCwwLjEtMi43LDAuMmwwLDBjLTIsMC4yLTQsMC43LTUuOCwxLjVsNS44LDEwdjAgbDIuNyw0LjdsMCwwbDAsMGwyLjctNC43djBsNS44LTEwQzM4LjksMzUuNiwzNywzNS4xLDM1LDM0Ljh6Ii8+IDxwYXRoIGQ9Ik01OS4yLDUxLjZjLTEuMy03LTUuMi0xMy4xLTExLTE3LjJsOS0xNS41YzAuOS0xLjUsMS4xLTMuNCwwLjYtNS4xYy0wLjUtMS43LTEuOC0zLjEtMy40LTMuOWMtNS42LTIuNy0xMS43LTQuMy0xNy45LTQuOCBDMzQuOCw1LDMzLDUuNiwzMS42LDYuOGMtMS4zLDEuMi0yLjEsMi45LTIuMSw0Ljd2MmMtNS4yLDAuMy0xMC4zLDEuNi0xNS4xLDMuN2gwYy0xLjYsMC43LTIuOSwyLjEtMy40LDMuOCBjLTAuNiwxLjctMC40LDMuNiwwLjYsNS4ybDQuNyw4LjJjLTUuOCw0LjEtOS43LDEwLjItMTEsMTcuMmMtMC4zLDEuOSwwLjIsMy44LDEuNCw1LjJjMS4yLDEuNSwzLDIuMyw1LDIuM2gyMC41aDBoMjAuNSBjMS45LDAsMy43LTAuOCw1LTIuM0M1OSw1NS4zLDU5LjUsNTMuNCw1OS4yLDUxLjZ6IE01My42LDUzLjNjLTAuMSwwLjEtMC40LDAuNC0wLjgsMC40SDM2LjlMNDUuNSwzOWM0LjQsMy4zLDcuNCw4LjEsOC40LDEzLjUgQzUzLjksNTIuOSw1My43LDUzLjIsNTMuNiw1My4zeiBNMTAuOSw1My4zYy0wLjEtMC4xLTAuMy0wLjQtMC4yLTAuOGMxLTUuNCw0LTEwLjIsOC40LTEzLjVsOC41LDE0LjdIMTEuNyBDMTEuMyw1My43LDExLDUzLjUsMTAuOSw1My4zeiBNMTYuMiwyMi43YzAuMS0wLjIsMC4yLTAuNCwwLjUtMC42YzQuMS0xLjgsOC40LTIuOSwxMi45LTMuMnYxMC42Yy0zLDAuMy01LjgsMS4xLTguNSwyLjNsLTQuNy04LjIgQzE2LjEsMjMuMiwxNi4xLDIyLjgsMTYuMiwyMi43eiBNNTIuNiwxNS4zYzAuMSwwLjIsMC4xLDAuNS0wLjEsMC44bC05LDE1LjVjLTIuNy0xLjItNS42LTItOC41LTIuM1YxNi4xYzAsMCwwLDAsMCwwdi00LjYgYzAtMC40LDAuMi0wLjYsMC4zLTAuOGMwLjEtMC4xLDAuNC0wLjMsMC43LTAuM2MwLDAsMC4xLDAsMC4xLDBjNS42LDAuNSwxMSwxLjksMTYsNC4zQzUyLjQsMTQuOSw1Mi42LDE1LjIsNTIuNiwxNS4zeiBNMzIuMywzNC43IGMwLjksMCwxLjgsMC4xLDIuNywwLjJsMCwwYzIsMC4yLDQsMC43LDUuOCwxLjVsLTUuOCwxMHYwTDMyLjMsNTFsMCwwbDAsMGwtMi43LTQuN3YwbC01LjgtMTBjMS45LTAuOCwzLjgtMS4zLDUuOC0xLjVsMCwwIEMzMC41LDM0LjcsMzEuNCwzNC43LDMyLjMsMzQuN0wzMi4zLDM0Ljd6Ii8+IDwvc3ZnPgo=" style="height:1.3em;vertical-align:-.2em"></div></div></div><div class="auth-form mx-auto flex-grow-1"><div class="d-flex align-items-stretch flex-column justify-content-center h-100 p-4"><div><div class="d-flex mb-4" style="gap:1em"><div class="btn btn-sm btn-primary flex-grow-1" ld="switch" data-name="login" t>Login</div><div class="btn btn-sm btn-text flex-grow-1" ld="switch" data-name="signup" t>Signup</div></div></div><div class="flex-grow-1 d-flex flex-column justify-content-center"><div><div class="form-group"><span t>email</span><input class="form-control" ld="username" name="username" t t-placeholder="your email address, as account name" autocomplete="username"><div class="invalid-feedback" style="margin-bottom:-.75em" t>invalid email address</div></div><div class="form-group" ld="displayname"><span t>display name</span><input class="form-control" name="displayname" t t-placeholder="such as 'Paris Hillton'" autocomplete="displayname"><div class="invalid-feedback" t>required field</div></div><div class="form-group"><span t>password</span><input class="form-control" type="password" ld="password" name="password" autocomplete="password" t t-placeholder="at least 8 characters"><div class="invalid-feedback" style="margin-bottom:-.75em" t>password too short</div></div></div><div class="text-center text-sm mb-4" t><span>by sign-in, you agree to our</span><span> </span><a class="mx-1" href="#" target="_blank" rel="noopener noreferrer">Terms</a><span> </span><span>and</span><span> </span><a class="mx-1" href="#" target="_blank" rel="noopener noreferrer">Privacy Policy</a></div><div class="btn btn-primary d-block my-2 ld-ext-right" ld="submit" t>Login <div class="ld ld-spin ld-ring"></div></div><div class="text-right my-2"><a ld="forget-password" href="#"><span t>Forget Password</span>? »</a></div></div><div><div class="sep sep-text mb-4 text-sm text-secondary"><span t>or login with</span></div><div class="d-flex"><div class="btn btn-primary mr-1 flex-grow-1 d-flex justify-content-between align-items-center" ld="social" data-name="fb"><span>Facebook</span> <i class="i-fb"></i></div><div class="btn btn-outline-secondary ml-1 flex-grow-1 d-flex justify-content-between align-items-center" ld="social" data-name="google"><span>Google</span> <i class="i-google"></i></div></div></div></div></div></div></form></div></div></div><style type="text/css">::placeholder{color:#c9cbcf !important;font-weight:200;font-family:sans-serif}[data-name=authpanel] .auth-base{width:700px;height:fit-content}[data-name=authpanel] .auth-info,[data-name=authpanel] .auth-form{width:50%}@media(max-width:768px){.ldcv[data-name=authpanel]>.base{width:100%;height:100%;max-width:100%;max-height:100%;display:block}.ldcv[data-name=authpanel]>.base .inner{border:0;box-shadow:none;border-radius:0}.ldcv[data-name=authpanel] .auth-base{width:100%;height:100%}.ldcv[data-name=authpanel] .auth-info{display:none}.ldcv[data-name=authpanel] .auth-form{width:100%}}</style><script type="@plotdb/block">var i18nResource;i18nResource={"zh-TW":{email:"電子郵件","your email address, as account name":"您的電子郵件地址做為帳戶名","invalid email address":"無效的電子郵件","display name":"顯示名稱","such as 'Paris Hillton'":"例如: 王小明","requried field":"不能留白","password too short":"密碼不能太短","password incorrect":"密碼不正確","how shuold we call you":"您希望我們如何稱呼您?",password:"密碼","at least 8 characters":"至少八個字元","by sign-in, you agree to our":"登入即代表您同意我們的",and:"和","or login with":"或使用下列登入",Terms:"使用條款","Privacy Policy":"隱私權政策",Login:"登入",Signup:"註冊","Sign Up":"註冊","Forget Password":"忘記密碼","code we sent you for using this service":"由我們另外發給您的邀請碼","invitation code":"邀請碼","invalid invitation code":"無效的邀請碼","Switch to Password Login":"切換回帳號登入 / 註冊","by Invitation":"使用邀請碼","login successfully":"成功登入"}};module.exports={pkg:{name:"auth",version:"0.0.1",i18n:i18nResource,dependencies:[{name:"ldview",version:"main"},{name:"ldnotify",version:"main"}]},init:function(e){var n,i,o,s,t,a=this;n=e.ctx,i=e.root,o=e.data;s=n.ldview,t=n.ldnotify;return function(e){return e.apply(a.mod)}(function(){var e,n,t,a,r=this;this.ldcv=e={};this._auth=o.auth;n=ld$.find(i,".ldcv[data-name=authpanel]",0);e.authpanel=new ldcover({root:n,baseZ:100});e.authpanel.on("toggle.on",function(){return setTimeout(function(){return t.get("username").focus()},100)});this.ldld=new ldloader({className:"ldld full z-fixed"});this._tab="login";this._info="default";this.view=t=new s({root:n,action:{click:{submit:function(e){var n;n=e.node;return r.submit()},switch:function(e){var n;n=e.node;return r.tab(n.getAttribute("data-name"))}}},handler:{submit:function(e){var n;n=e.node;return n.classList.toggle("disabled",!r.ready)},displayname:function(e){var n;n=e.node;return n.classList.toggle("d-none",r._tab==="login")},info:function(e){var n;n=e.node;return n.classList.toggle("d-none",n.getAttribute("data-name")!==r._info)},switch:function(e){var n,t;n=e.node;t=n.getAttribute("data-name");n.classList.toggle("btn-text",r._tab!==t);return n.classList.toggle("btn-primary",r._tab===t)}}});this.form=a=new ldform({names:function(){return["username","password","displayname"]},afterCheck:function(e,n){if(e.username!==1&&!r.isValid.username(n.username.value)){e.username=2}if(e.password!==1){e.password=!n.password.value?1:!r.isValid.password(n.password.value)?2:0}if(r._tab==="login"){return e.displayname=0}else{return e.displayname=!n.displayname.value?1:!!n.displayname.value?0:2}},root:n});return this.form.on("readystatechange",function(e){r.ready=e;return r.view.render("submit")})})},interface:function(){var t=this;return function(e,n){e==null&&(e=true);n==null&&(n={});if(n.tab){t.mod.tab(n.tab)}if(n.lock){t.mod.ldcv.authpanel.lock()}if(e){return t.mod.ldcv.authpanel.get()}else{return t.mod.auth.fetch().then(function(e){return this.mod.ldcv.authpanel.set(e)})}}},mod:{tab:function(e){this._tab=e;return this.view.render()},isValid:{username:function(e){return curegex.get("email").exec(e)},password:function(e){return e&&e.length>=8}},info:function(e){this._info=e;return this.view.render("info")},submit:function(){var e,n,t,a=this;if(!this.form.ready()){return}e=this.form.values();n=(t={},t.username=e.username,t.password=e.password,t.displayname=e.displayname,t);return this.ldld.on().then(function(){return debounce(1e3)}).then(function(){var e;e={};return ld$.fetch(a._auth.apiRoot()+""+a._tab,{method:"POST"},{json:n})}).then(function(){return a._auth.fetch()})["finally"](function(){return a.ldld.off()}).then(function(e){a.info("default");a.form.reset();a.ldcv.authpanel.set(e);ldnotify.send("success","login successfully");return e})["catch"](function(e){console.log(e);if(lderror.id(e)===1004){return a.info("login-exceeded")}a.info(a._tab+"-failed");a.form.fields.password.value=null;return a.form.check({n:"password",now:true})})}}};</script></div>
